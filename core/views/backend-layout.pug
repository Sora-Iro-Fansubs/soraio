doctype html
html.no-js(lang="en")
  head
    meta(charset="utf-8")
    link(rel="canonical" href=".")
    meta(http-equiv="x-ua-compatible", content="ie=edge")
    title= site_title
    meta(name="description", content="Sora Iro Fansubs - Dashboard")
    meta(name="viewport", content="width=device-width, initial-scale=1")
    link(rel="apple-touch-icon", href="apple-touch-icon.png")
    link(rel="stylesheet", href="/node_modules/simplemde/dist/simplemde.min.css")
    link(rel="stylesheet", href="/css/vendor.css")
    link(rel="stylesheet", href="/css/app.css")
    link(href="/css/responsive-table.css", rel="stylesheet")
    style(type="text/css").
      .jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}
    script(src="/node_modules/simplemde/dist/simplemde.min.js")
  body
    .main-wrapper
      #app.app.sidebar-fixed
        header.header
          .header-block.header-block-collapse.hidden-lg-up
            button#sidebar-collapse-btn.collapse-btn
              i.fa.fa-bars
          .header-block.header-block-nav
            ul.nav-profile
              li.profile.dropdown
                a.nav-link.dropdown-toggle(data-toggle="dropdown", href="#", role="button", aria-haspopup="true", aria-expanded="false")
                  img.img(avatar=user.firstName + ' ' + user.lastName)
                  span.name
                    = user.firstName + ' ' + user.lastName
                .dropdown-menu.profile-dropdown-menu.animated.flipInX(aria-labelledby="dropdownMenu1")
                  a.dropdown-item(href="/")
                    i.fa.fa-globe.icon
                    |  Back to site
                  a.dropdown-item(href="/profile")
                    i.fa.fa-user.icon
                    |  Your profile
                  a.dropdown-item(href="/auth/logout")
                    i.fa.fa-power-off.icon
                    |  Logout
        aside.sidebar
          .sidebar-container
            .sidebar-header
              .brand
                .logo
                  span.l.l1
                  span.l.l2
                  span.l.l3
                  span.l.l4
                  span.l.l5
                = site_title
            nav.menu
              ul#sidebar-menu.nav.metismenu
                li.active
                  a(href="/backend/dashboard")
                    i.fa.fa-home
                    | Dashboard
                li
                  a(href="/backend/posts/add")
                    i.fa.fa-pencil-square-o
                    | Create a New Post
                li
                  a(href="javascript:void(0)")
                    i.fa.fa-files-o
                    | Posts
                    i.fa.arrow
                  ul.collapse(style="height: 0px;")
                    li
                      a(href="/backend/posts/user")
                        | Your Posts
                    li
                      a(href="/backend/posts/all")
                        | All Posts
                li
                  a(href="javascript:void(0)")
                    i.fa.fa-file-text-o
                    |  Pages
                    i.fa.arrow
                  ul.collapse(style="height: 0px;")
                    li
                      a(href="/backend/pages/add")
                        | Create a New Page
                    li
                      a(href="/backend/pages/all")
                        | All Pages
                li
                  a(href="javascript:void(0)")
                    i.fa.fa-ellipsis-h
                    |  Projects
                    i.fa.arrow
                  ul.collapse(style="height: 0px;")
                    li
                      a(href="/backend/projects/add")
                        | Add a New Project
                    li
                      a(href="/backend/projects/all")
                        | All Projects
                li
                  a(href="javascript:void(0)")
                    i.fa.fa-desktop
                    |  Appearance
                    i.fa.arrow
                  ul.collapse(style="height: 0px;")
                    li
                      a(href="/backend/projects/add")
                        | Header Image
                    li
                      a(href="/backend/dashboard/menu")
                        | Site Menu
                li
                  a(href="javascript:void(0)")
                    i.fa.fa-users
                    | Users
                    i.fa.arrow
                  ul.collapse(style="height: 0px;")
                    if user.role_id === 1
                      li
                        a(href="/backend/users/add")
                          | Create a New User
                    li
                      a(href="/backend/users")
                        | All Users
                if user.role_id === 1
                  li
                    a(href="/backend/settings")
                      i.fa.fa-gears
                      | Settings
          footer.sidebar-footer
            ul#customize-menu.nav.metismenu
              li
                ul.collapse(style="height: 0px;")
                  li.customize
                    .customize-item
                      .row.customize-header
                        .col-xs-4
                        .col-xs-4
                          label.title fixed
                        .col-xs-4
                          label.title static
                      .row.hidden-md-down
                        .col-xs-4
                          label.title Sidebar:
                        .col-xs-4
                          label
                            input.radio(name="sidebarPosition", value="sidebar-fixed", type="radio")
                            span
                        .col-xs-4
                          label
                            input.radio(name="sidebarPosition", value="", type="radio")
                            span
                      .row
                        .col-xs-4
                          label.title Header:
                        .col-xs-4
                          label
                            input.radio(name="headerPosition", value="header-fixed", type="radio")
                            span
                        .col-xs-4
                          label
                            input.radio(name="headerPosition", value="", type="radio")
                            span
                      .row
                        .col-xs-4
                          label.title Footer:
                        .col-xs-4
                          label
                            input.radio(name="footerPosition", value="footer-fixed", type="radio")
                            span
                        .col-xs-4
                          label
                            input.radio(name="footerPosition", value="", type="radio")
                            span
                a(href="")
                  i.fa.fa-cog
                  |  Dashboard Customize
        #sidebar-overlay.sidebar-overlay
        block body
        footer.footer
          .footer-block.github
            a(href="javascript:void(0)")
              i.fa.fa-github-alt
              span.hidden-sm-down
                |  About
              span.hidden-md-up= ' ' + site
          .footer-block.author
            ul
              li
                | &copy;
                a(href="/")= site_title
                | , 2012 - 2016
              li
                a(href="/") MIT License
        #modal-media.modal.fade
          .modal-dialog.modal-lg
            .modal-content
              .modal-header
                button.close(type="button", data-dismiss="modal", aria-label="Close")
                  span(aria-hidden="true") ×
                  span.sr-only Close
                h4.modal-title Media Library
              .modal-body.modal-tab-container
                ul.nav.nav-tabs.modal-tabs(role="tablist")
                  li.nav-item
                    a.nav-link(href="#gallery", data-toggle="tab", role="tab") Gallery
                  li.nav-item
                    a.nav-link.active(href="#upload", data-toggle="tab", role="tab") Upload
                .tab-content.modal-tab-content
                  #gallery.tab-pane.fade(role="tabpanel")
                    .images-container
                      .row
                  #upload.tab-pane.fade.active.in(role="tabpanel")
                    .upload-container
                      #dropzone
                        form#demo-upload.dropzone.needsclick.dz-clickable(action="/", method="POST", enctype="multipart/form-data")
                          .dz-message-block
                            .dz-message.needsclick  Drop files here or click to upload.
              .modal-footer
                button.btn.btn-secondary(type="button", data-dismiss="modal") Close
                button.btn.btn-primary(type="button") Insert Selected
        #confirm-modal.modal.fade
          .modal-dialog(role="document")
            .modal-content
              .modal-header
                button.close(type="button", data-dismiss="modal", aria-label="Close")
                  span(aria-hidden="true") ×
                h4.modal-title
                  i.fa.fa-warning
                  |  Information
              .modal-body
                if message && message.length
                  p= message
                else
                  p Are you sure want to do this?
              .modal-footer
                a.btn.btn-primary Yes
                button.btn.btn-secondary(type="button", data-dismiss="modal") Close
    #ref.ref
      .color-primary
      .chart
        .color-primary
        .color-secondary
    script(src="//ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js")
    script(src="/js/vendor.js")
    script(src="/node_modules/jquery-lazyload/jquery.lazyload.js")
    script(src="/node_modules/sortablejs/Sortable.min.js")
    script(src="/node_modules/moment/min/moment.min.js")
    script(src="/js/app.js")
    script(src="/js/menu.js")
    script(src="/js/letterAvatar.js")
    script.
      var disqus_popular = 'https://disqus.com/api/3.0/threads/listPopular.json?api_key=#{disqus_secret}&forum=#{disqus_shortname}&limit=10&interval=90d&callback=?';
      var disqus_recent = 'https://disqus.com/api/3.0/forums/listPosts.json?api_key=#{disqus_secret}&forum=#{disqus_shortname}&limit=10&related=thread&callback=?';
      $.getJSON(disqus_popular)
      .done(function( json ) {
        console.log( json.response );
        var items = [];
        $.each( json.response, function( i, item ) {
          item.posts = (parseInt(item.posts) === 1) ? item.posts + ' Comment' : item.posts + ' Comments';
          item.createdAt = moment(item.createdAt).format("DD MMM, YYYY - HH:mm");
          items.push('<li class="item"><div class="item-row"><div class="item-col fixed item-col-img xs"><a href="'+item.link+'"><img class="item-img xs rounded" avatar="'+item.clean_title+'"></a></div><div class="item-col item-col-title no-overflow"><div><a href="'+item.link+'"><h4 class="item-title no-wrap"> '+ item.clean_title +'</h4></a></div></div><div class="item-col item-col-comments"><div class="item-heading">Comments</div><div>'+ item.posts +'</div></div><div class="item-col item-col-date"><div class="item-heading">First View</div><div>'+item.createdAt+'</div></div></div></li>');
        });
        $('ul.popular').html(items.join(""));
        LetterAvatar.transform();
        setSameHeights();
      })
      .fail(function( jqxhr, textStatus, error ) {
        var err = textStatus + ", " + error;
        $('ul.popular').html('<li class="item"><div class="item-row"><div class="item-col text-center">You must to set up Disqus Public API first to get this feature active.</div></div></li>');
        console.log( "Request Failed: " + err );
      });
      $.getJSON(disqus_recent)
      .done(function( json ) {
        console.log( json.response );
        var items = [];
        $.each( json.response, function( i, item ) {
          item.createdAt = moment(item.createdAt).format("DD MMM HH:mm");
          items.push('<li class="item"><div class="item-row"><div class="item-col fixed item-col-img xs"><a href="'+item.author.profileUrl+'"><div class="item-img xs rounded" style="background-image: url('+item.author.avatar.permalink+');"></div></a></div><div class="item-col item-col-title no-overflow"><div><a href="'+item.thread.link+'#comment-'+item.id+'"><h4 class="item-title no-wrap"> '+item.raw_message+'</h4></a></div></div><div class="item-col item-col-date"><div class="item-heading">Date</div><div style="font-size:10pt;"> '+item.createdAt+'</div></div></div></li>');
        });
        $('ul.recent-comments').html(items.join(""));
        LetterAvatar.transform();
        setSameHeights();
      })
      .fail(function( jqxhr, textStatus, error ) {
        var err = textStatus + ", " + error;
        $('ul.recent-comments').html('<li class="item"><div class="item-row"><div class="item-col text-center">You must to set up Disqus Public API first to get this feature active.</div></div></li>');
        console.log( "Request Failed: " + err );
      });
    if message && message.length
      script.
        $(window).load(function() {
          $('#confirm-modal .btn-primary').hide();
          $('#confirm-modal .btn-secondary').text('Close');
          $('#confirm-modal').modal('show');
        });
    script.
      $(document).ready(function(){
        $('form#anime').on('submit', function(){
          $('form#anime').attr('action', '/backend/projects/find/' + $('#anime input.anime').val());
        });
      })
    .responsive-bootstrap-toolkit
      .device-xs.hidden-sm-up
      .device-sm.hidden-xs-down.hidden-md-up
      .device-md.hidden-sm-down.hidden-lg-up
      .device-lg.hidden-md-down.hidden-xl-up
      .device-xl.hidden-lg-down
    .jqvmap-label(style="display: none; left: 325px; top: 213px;") Indonesia
    input.dz-hidden-input(multiple="multiple", style="visibility: hidden; position: absolute; top: 0px; left: 0px; height: 0px; width: 0px;", type="file")
    .jqvmap-label(style="display: none; left: 325px; top: 213px;") Indonesia
